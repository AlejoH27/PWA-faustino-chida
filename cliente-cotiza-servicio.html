<!DOCTYPE html>
<html lang="es">

<head>
 <meta charset="UTF-8">
 <meta name="viewport"
   content="width=device-width">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <title>All service</title>
    <meta name="keywords" content=""
    <meta name="description" content="">
    <meta name="author" content="">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <!-- bootstrap css -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- style css -->
    <link rel="stylesheet" href="css/style.css">
    <!-- style css -->
    <link rel="stylesheet" href="css/estilo.css">
    <!-- Responsive-->
    <link rel="stylesheet" href="css/responsive.css">
  
    <link href="https://fonts.googleapis.com/css?family=Lato|Liu+Jian+Mao+Cao&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/estilo-tarjeta.css">
    <!-- fevicon -->
    <link rel="icon" href="images/fevicon.png" type="image/gif" />
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
    <!-- Tweaks for older IEs-->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
 <script type="module"
   src="./lib/js/custom/campo-id-oculto.js">
   </script>
 <script type="module"
   src="./lib/js/custom/hipervinculo-cancelar-index.js">
   </script>
 <script type="module"
   src="./lib/js/custom/boton-agregar-producto.js">
   </script>
  <script type="module"
   src="./lib/js/custom/boton-mandar-solicitud.js">
   </script>
 <script type="module"
   src="./lib/js/custom/indica-campos-obligatorios.js">
   </script>
 <script type="module"
   src="./lib/js/custom/indicador-cargando.js">
   </script>
 <script type="module"
   src="./js/custom/campo-producto.js">
   </script>
 <script type="module"
   src="./js/custom/campo-precio.js">
   </script>
 <script type="module"
   src="./js/custom/campo-cantidad.js">
   </script>
  <script type="module"
  src="./js/custom/mi-nav.js">
  </script>
</head>

<body>

  <div class="loader_bg">
     <div class="loader"><img src="images/carga-camion.gif" alt="cargando..." width="100px" height="100px"/></div>
  </div>
  <!-- end loader -->
  <!-- header -->
    <mi-nav id="nav" class="encabezado" >
  <!-- end header inner -->
  <!-- end header -->
  <!-- banner -->

  </mi-nav>

  <section class="banner_main" style="margin-top: 75px;">

    <div class="container mt-5">
      <form id="forma">

        <div class="row">

          <div class="col-md-6">
            <div class="card mb-3">
              <div class="card-body">

                <h1 class="card-title">Cotize su servicio</h1>

                <div class="form-group">
                  <label for="id_cos">Id del costo:</label>
                  <input type="text" class="form-control" id="id_cos" name="id_cos" readonly>
                </div>

                <div class="form-group">
                  <label for="us_of_id_ab">Persona que realizará el servicio:</label>
                  <input type="text" class="form-control" id="usu_nombre" name="usu_nombre" readonly>
                </div>

                <div class="form-group">
                  <label for="costo">Costo:</label>
                  <input type="text" class="form-control" id="costo" name="costo" readonly>
                </div>

                <div class="form-group">
                  <label for="serv_id_serv">Servicio pedido:</label>
                  <input type="text" class="form-control" id="tipo_servicio" name="tipo_servicio" readonly>
                </div>

                <div class="form-group">
                  <label for="serv_cos_oficios_id_oficio">Oficio del trabajador:</label>
                  <input type="text" class="form-control" id="tipo_oficio" name="tipo_oficio" readonly>
                </div>

              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="card mb-3">
              <div class="card-body">

                <h5 class="card-title">Información Adicional</h5>

                <div class="form-group">
                  <label for="nombre">Tu nombre:</label>
                  <input type="text" class="form-control" id="nombre_cliente" name="nombre_cliente" readonly>
                </div>

                <div class="form-group">
                  <label for="cue">Tu Cue:</label>
                  <input type="text" class="form-control" id="cue_cliente" name="cue_cliente" readonly>
                </div>

              </div>
            </div>
            <div class="card mb-3">
              <div class="card-body">

                <!-- Button trigger modal -->
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                  Agrega tarjeta de pago
                </button>
                
              </div>
            </div>
          </div>

          <div class="col-12">
            <div class="card">
              <div class="card-body">

                <h5 class="card-title">Opciones</h5>

                <p class="mb-0">
                  <hipervinculo-cancelar-index>
                    <!-- Aquí iría tu etiqueta personalizada para Cancelar -->
                    <a href="#" class="btn btn-secondary">
                      Cancelar
                    </a>
                  </hipervinculo-cancelar-index>
                </p>

                <indica-campos-obligatorios>
                  <!-- Aquí iría tu etiqueta personalizada para Campos Obligatorios -->
                  Campos Obligatorios
                </indica-campos-obligatorios>

                <p class="mt-3">
                  <boton-mandar-solicitud>
                    <!-- Aquí iría tu etiqueta personalizada para Agregar Producto -->
                    <button type="button" class="btn btn-primary">
                      Agregar Producto
                    </button>
                  </boton-mandar-solicitud>
                </p>

              </div>
            </div>
          </div>

        </div>
        
      </form>
    </div>

    

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Tarjeta</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">

            <style>
              .atencion-rojo {
                  background-color: #FF7171;
                  padding: 15px; /* Ajusta el espacio interno según sea necesario */
                  border-radius: 5px; /* Añade bordes redondeados para un aspecto más agradable */
              }

            </style>

            <div class="form-group atencion-rojo">
                <label for="atencion">Atención</label>
                <textarea id="atencion" name="atencion" class="form-control" rows="5" placeholder="Por favor, tenga en cuenta que para garantizar la seguridad y confirmar la disponibilidad de fondos, solicitamos los detalles de su tarjeta de crédito. Esta información se manejará de manera segura y confidencial.
En caso de que el trabajador acepte, no se le hara un cargo en absoluto. si no hasta que se empieza ah realizar el servicio, conforme a nuestras reglas de negocio"></textarea>
            </div>


            <div class="contenedor">

              <!-- Tarjeta -->
              <section class="tarjeta" id="tarjeta">
                <div class="delantera">
                  <div class="logo-marca" id="logo-marca">
                    <!-- <img src="img/logos/visa.png" alt=""> -->
                  </div>
                  <img src="images/chip-tarjeta.png" class="chip" alt="">
                  <div class="datos">
                    <div class="grupo" id="numero">
                      <p class="label">Número Tarjeta</p>
                      <p class="numero">#### #### #### ####</p>
                    </div>
                    <div class="flexbox">
                      <div class="grupo" id="nombre">
                        <p class="label">Nombre Tarjeta</p>
                        <p class="nombre">Aqui tu nombre</p>
                      </div>

                      <div class="grupo" id="expiracion">
                        <p class="label">Expiracion</p>
                        <p class="expiracion"><span class="mes">MM</span> / <span class="year">AA</span></p>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="trasera">
                  <div class="barra-magnetica"></div>
                  <div class="datos">
                    <div class="grupo" id="firma">
                      <p class="label">Firma</p>
                      <div class="firma"><p></p></div>
                    </div>
                    <div class="grupo" id="ccv">
                      <p class="label">CCV</p>
                      <p class="ccv"></p>
                    </div>
                  </div>
                  <p class="leyenda">Derechos reservados para EasySoft</p>
                  <a href="#" class="link-banco">https://all-service-relacional.alejohernandez1.repl.co/</a>
                </div>
              </section>

              <!-- Contenedor Boton Abrir Formulario -->
              <div class="contenedor-btn">
                <button class="btn-abrir-formulario" id="btn-abrir-formulario">
                  <i class="fas fa-plus"></i>
                </button>
              </div>

              <!-- Formulario -->
              <form action="" id="formulario-tarjeta" class="formulario-tarjeta">
                <div class="grupo">
                  <label for="inputNumero">Número Tarjeta</label>
                  <input type="text" id="inputNumero" maxlength="19" autocomplete="off">
                </div>
                <div class="grupo">
                  <label for="inputNombre">Nombre</label>
                  <input type="text" id="inputNombre" maxlength="19" autocomplete="off">
                </div>
                <div class="flexbox">
                  <div class="grupo expira">
                    <label for="selectMes">Expiracion</label>
                    <div class="flexbox">
                      <div class="grupo-select">
                        <select name="mes" id="selectMes">
                          <option disabled selected>Mes</option>
                        </select>
                        <i class="fas fa-angle-down"></i>
                      </div>
                      <div class="grupo-select">
                        <select name="year" id="selectYear">
                          <option disabled selected>Año</option>
                        </select>
                        <i class="fas fa-angle-down"></i>
                      </div>
                    </div>
                  </div>

                  <div class="grupo ccv">
                    <label for="inputCCV">CCV</label>
                    <input type="text" id="inputCCV" maxlength="3">
                  </div>
                </div>
              </form>



            </div>
            
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-success" data-dismiss="modal">Guardar</button>
          </div>
        </div>
      </div>
    </div>


   
    
    </section>

  <script>

    
    // Obtener la URL actual
    var url = new URL(window.location.href);

    // Obtener el valor del parámetro 'cliente' de la URL
    var nombreCliente = url.searchParams.get("nombre_cliente");

    // Obtener el valor del parámetro 'correo' de la URL
    var cueCliente = url.searchParams.get("cue_cliente");

    // Mostrar los valores en los campos del formulario
    document.getElementById("nombre_cliente").value = nombreCliente;
    document.getElementById("cue_cliente").value = cueCliente;
  </script>
  
 <script type="module">
  import {
   escuchaEventosAgrega
  } from "./lib/js/escuchaEventosAgrega.js"
  import {
   submit
  } from "./lib/js/submit.js"
  import {
   muestraError
  } from "./lib/js/muestraError.js"
  import {
   parametrosDePagina
  } from "./lib/js/parametrosDePagina.js"
  import {
   saltaAIndex
  } from "./lib/js/saltaAIndex.js"
  import {
   ejecuta
  } from "./lib/js/ejecuta.js"
  import {
   muestraNumero
  } from "./lib/js/muestraNumero.js"
  import {
   muestraTexto
  } from "./lib/js/muestraTexto.js"
  import {
   muestraPrecio
  } from "./lib/js/muestraPrecio.js"
  import {
   txtSolicitudEnviada
  } from "./js/txt/txtSolicitudEnviada.js"
   import {
    Sesion
   } from "./js/Sesion.js"
   import {
     ROL_CLIENTE
    } from "./js/const/ROL_CLIENTE.js"

  const parametros =
   parametrosDePagina()

   //Funcion para ver la sesion
    preparaVistaSesion()

    async function preparaVistaSesion() {
     try {
      const json =
       await buscaEnElServidorSesion()
       //console.log("Valor de id:", parametros.get("id_servicio"));
      const sesion = new Sesion(json)
      muestraSesion(sesion)

     } catch (e) {
      muestraError(e)
     }
    }

    async function
     buscaEnElServidorSesion() {
     return await ejecuta(fetch(
      "srv/SrvSesion.php"))
    }

    async function muestraSesion(sesion) {
     if (sesion.rolIds
      .has(ROL_CLIENTE)) {
      nav.sesion = sesion
     } else {
      saltaAIndex()
     }
    }

    //**********************************/

  preparaVista()

  async function preparaVista() {
   try {
    const modelo =
     await buscaEnElServidor()
    muestra(modelo)
    escuchaEventosAgrega(forma,
     agrega)
   } catch (e) {
    muestraError(e)
    //saltaAIndex()
   }
  }

  async function
   buscaEnElServidor() {
   return await ejecuta(fetch(
    "srv/SrvClienteBuscaCotizacion.php?" +
    parametros))
  }

  function muestra(modelo) {
   muestraNumero(forma.id_cos,
    modelo.id_cos)
   muestraNumero(forma.costo,
    modelo.costo)
   muestraTexto(forma.usu_nombre,
    modelo.usu_nombre)
   muestraTexto(forma.tipo_servicio,
    modelo.tipo_servicio)
   muestraTexto(forma.tipo_oficio, 
    modelo.tipo_oficio)
  }


  /** @param {Event} evt */
  async function agrega(evt) {
   try {
    const m = await submit(evt,
     "srv/" +
     "SrvDetalleRespuestaAgregaCliente.php",
     forma)
    alert(txtSolicitudEnviada())
    saltaAIndex()
   } catch (e) {
    muestraError(e)
   }
  }
 </script>




  <!--  footer -->
  <footer class="bg-dark text-center text-white">
    <!-- Grid container -->
    <div class="container p-4 pb-0">
      <!-- Section: Social media -->
      <section class="mb-4">
        <!-- Facebook -->
        <a
          class="btn text-white btn-floating m-1"
          style="background-color: #3b5998;"
          href="#!"
          role="button"
          ><i class="fab fa-facebook-f"></i
        ></a>

        <!-- Twitter -->
        <a
          class="btn text-white btn-floating m-1"
          style="background-color: #55acee;"
          href="#!"
          role="button"
          ><i class="fab fa-twitter"></i
        ></a>

        <!-- Google -->
        <a
          class="btn text-white btn-floating m-1"
          style="background-color: #dd4b39;"
          href="#!"
          role="button"
          ><i class="fab fa-google"></i
        ></a>

        <!-- Instagram -->
        <a
          class="btn text-white btn-floating m-1"
          style="background-color: #ac2bac;"
          href="#!"
          role="button"
          ><i class="fab fa-instagram"></i
        ></a>

        <!-- Linkedin -->
        <a
          class="btn text-white btn-floating m-1"
          style="background-color: #0082ca;"
          href="#!"
          role="button"
          ><i class="fab fa-linkedin-in"></i
        ></a>
        <!-- Github -->
        <a
          class="btn text-white btn-floating m-1"
          style="background-color: #333333;"
          href="#!"
          role="button"
          ><i class="fab fa-github"></i
        ></a>
      </section>
      <!-- Section: Social media -->
    </div>
    <!-- Grid container -->

    <!-- Copyright -->
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
      © 2023 Copyright:
      <a class="text-white" href="https://mdbootstrap.com/" >EasySoft</a>
    </div>
    <!-- Copyright -->
  </footer>
  <!-- end footer -->
  <!-- Javascript files-->
  <script src="js/jquery.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/jquery-3.0.0.min.js"></script>
  <script src="js/plugin.js"></script>
  <!-- sidebar -->
  <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="js/custom.js"></script>
  <script src="https://kit.fontawesome.com/2c36e9b7b1.js" crossorigin="anonymous"></script>
  <script src="js/main.js"></script>

  
</body>

</html>